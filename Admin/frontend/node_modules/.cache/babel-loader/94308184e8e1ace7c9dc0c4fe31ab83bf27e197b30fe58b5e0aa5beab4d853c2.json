{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CRcra\\\\Downloads\\\\CMSAdmin\\\\CMSAdmin\\\\frontend\\\\src\\\\checklist.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Checklist() {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [fileMeta, setFileMeta] = useState({}); // เก็บข้อมูลผู้ส่ง\n\n  useEffect(() => {\n    // ดึงรายชื่อไฟล์\n    fetch(\"http://localhost:4000/api/uploads\").then(res => res.json()).then(data => setFiles(data.files || []));\n\n    // ดึงข้อมูล meta (สมมติว่ามีไฟล์ meta.json ใน backend)\n    fetch(\"http://localhost:4000/api/uploads-meta\").then(res => res.json()).then(data => setFileMeta(data || {}));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: \"40px auto\",\n      padding: 32,\n      background: \"#fff\",\n      borderRadius: 16,\n      boxShadow: \"0 4px 24px rgba(30,41,59,0.10)\",\n      fontFamily: \"Segoe UI, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        color: \"#1a237e\",\n        marginBottom: 32,\n        fontWeight: 700,\n        letterSpacing: 1\n      },\n      children: \"\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E17\\u0E35\\u0E48\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), files.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        color: \"#888\",\n        padding: 32\n      },\n      children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E31\\u0E1B\\u0E42\\u0E2B\\u0E25\\u0E14\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\n        gap: 32\n      },\n      children: files.map(file => {\n        var _fileMeta$file;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: \"#f8fafc\",\n            borderRadius: 12,\n            boxShadow: \"0 2px 8px rgba(30,41,59,0.06)\",\n            padding: 16,\n            textAlign: \"center\",\n            transition: \"box-shadow 0.2s\",\n            border: \"1px solid #e2e8f0\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 500,\n              color: \"#334155\",\n              marginBottom: 8\n            },\n            children: (_fileMeta$file = fileMeta[file]) !== null && _fileMeta$file !== void 0 && _fileMeta$file.sender ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"\\u0E1C\\u0E39\\u0E49\\u0E2A\\u0E48\\u0E07: \", fileMeta[file].sender]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"\\u0E44\\u0E21\\u0E48\\u0E17\\u0E23\\u0E32\\u0E1A\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E2A\\u0E48\\u0E07\"\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `http://localhost:4000/uploads/${file}`,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            style: {\n              color: \"#2563eb\",\n              fontWeight: 500,\n              textDecoration: \"none\",\n              wordBreak: \"break-all\"\n            },\n            title: \"\\u0E14\\u0E32\\u0E27\\u0E19\\u0E4C\\u0E42\\u0E2B\\u0E25\\u0E14/\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E44\\u0E1F\\u0E25\\u0E4C\",\n            children: file\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"16px 0 0 0\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:4000/uploads/${file}`,\n              alt: file,\n              style: {\n                width: \"100%\",\n                maxWidth: 180,\n                maxHeight: 180,\n                objectFit: \"cover\",\n                borderRadius: 8,\n                boxShadow: \"0 1px 4px rgba(30,41,59,0.10)\"\n              },\n              onError: e => {\n                e.target.onerror = null;\n                e.target.style.display = \"none\";\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, file, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n}\n_s(Checklist, \"nn37Qn8v169ZOzvjsCG30D0AbsI=\");\n_c = Checklist;\nexport default Checklist;\n\n// เพิ่มใน server.js\nconst fs = require(\"fs/promises\");\nconst path = require(\"path\");\napp.post(\"/api/upload\", upload.single(\"file\"), async (req, res) => {\n  const sender = req.body.sender || \"ไม่ทราบชื่อ\";\n  const filename = req.file.filename;\n\n  // อ่าน meta เดิม\n  let meta = {};\n  try {\n    meta = JSON.parse(await fs.readFile(\"uploads-meta.json\", \"utf-8\"));\n  } catch (e) {}\n\n  // เพิ่ม meta ใหม่\n  meta[filename] = {\n    sender\n  };\n\n  // เขียนกลับ\n  await fs.writeFile(\"uploads-meta.json\", JSON.stringify(meta, null, 2));\n  res.json({\n    success: true\n  });\n});\n\n// API สำหรับดึง meta\napp.get(\"/api/uploads-meta\", async (req, res) => {\n  try {\n    const meta = JSON.parse(await fs.readFile(\"uploads-meta.json\", \"utf-8\"));\n    res.json(meta);\n  } catch (e) {\n    res.json({});\n  }\n});\nvar _c;\n$RefreshReg$(_c, \"Checklist\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Checklist","_s","files","setFiles","fileMeta","setFileMeta","fetch","then","res","json","data","style","maxWidth","margin","padding","background","borderRadius","boxShadow","fontFamily","children","textAlign","color","marginBottom","fontWeight","letterSpacing","fileName","_jsxFileName","lineNumber","columnNumber","length","display","gridTemplateColumns","gap","map","file","_fileMeta$file","transition","border","sender","href","target","rel","textDecoration","wordBreak","title","src","alt","width","maxHeight","objectFit","onError","e","onerror","_c","fs","require","path","app","post","upload","single","req","body","filename","meta","JSON","parse","readFile","writeFile","stringify","success","get","$RefreshReg$"],"sources":["C:/Users/CRcra/Downloads/CMSAdmin/CMSAdmin/frontend/src/checklist.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction Checklist() {\r\n  const [files, setFiles] = useState([]);\r\n  const [fileMeta, setFileMeta] = useState({}); // เก็บข้อมูลผู้ส่ง\r\n\r\n  useEffect(() => {\r\n    // ดึงรายชื่อไฟล์\r\n    fetch(\"http://localhost:4000/api/uploads\")\r\n      .then(res => res.json())\r\n      .then(data => setFiles(data.files || []));\r\n\r\n    // ดึงข้อมูล meta (สมมติว่ามีไฟล์ meta.json ใน backend)\r\n    fetch(\"http://localhost:4000/api/uploads-meta\")\r\n      .then(res => res.json())\r\n      .then(data => setFileMeta(data || {}));\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        maxWidth: 800,\r\n        margin: \"40px auto\",\r\n        padding: 32,\r\n        background: \"#fff\",\r\n        borderRadius: 16,\r\n        boxShadow: \"0 4px 24px rgba(30,41,59,0.10)\",\r\n        fontFamily: \"Segoe UI, sans-serif\"\r\n      }}\r\n    >\r\n      <h1 style={{\r\n        textAlign: \"center\",\r\n        color: \"#1a237e\",\r\n        marginBottom: 32,\r\n        fontWeight: 700,\r\n        letterSpacing: 1\r\n      }}>\r\n        ไฟล์ที่ลูกค้าอัปโหลด\r\n      </h1>\r\n      {files.length === 0 ? (\r\n        <div style={{ textAlign: \"center\", color: \"#888\", padding: 32 }}>\r\n          ไม่มีไฟล์ที่อัปโหลด\r\n        </div>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n            gap: 32\r\n          }}\r\n        >\r\n          {files.map(file => (\r\n            <div\r\n              key={file}\r\n              style={{\r\n                background: \"#f8fafc\",\r\n                borderRadius: 12,\r\n                boxShadow: \"0 2px 8px rgba(30,41,59,0.06)\",\r\n                padding: 16,\r\n                textAlign: \"center\",\r\n                transition: \"box-shadow 0.2s\",\r\n                border: \"1px solid #e2e8f0\"\r\n              }}\r\n            >\r\n              <div style={{ fontWeight: 500, color: \"#334155\", marginBottom: 8 }}>\r\n                {/* แสดงชื่อผู้ส่ง ถ้ามี */}\r\n                {fileMeta[file]?.sender ? (\r\n                  <>ผู้ส่ง: {fileMeta[file].sender}</>\r\n                ) : (\r\n                  <>ไม่ทราบชื่อผู้ส่ง</>\r\n                )}\r\n              </div>\r\n              <a\r\n                href={`http://localhost:4000/uploads/${file}`}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                style={{\r\n                  color: \"#2563eb\",\r\n                  fontWeight: 500,\r\n                  textDecoration: \"none\",\r\n                  wordBreak: \"break-all\"\r\n                }}\r\n                title=\"ดาวน์โหลด/เปิดไฟล์\"\r\n              >\r\n                {file}\r\n              </a>\r\n              <div style={{ margin: \"16px 0 0 0\" }}>\r\n                <img\r\n                  src={`http://localhost:4000/uploads/${file}`}\r\n                  alt={file}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    maxWidth: 180,\r\n                    maxHeight: 180,\r\n                    objectFit: \"cover\",\r\n                    borderRadius: 8,\r\n                    boxShadow: \"0 1px 4px rgba(30,41,59,0.10)\"\r\n                  }}\r\n                  onError={e => {\r\n                    e.target.onerror = null;\r\n                    e.target.style.display = \"none\";\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checklist;\r\n\r\n// เพิ่มใน server.js\r\nconst fs = require(\"fs/promises\");\r\nconst path = require(\"path\");\r\n\r\napp.post(\"/api/upload\", upload.single(\"file\"), async (req, res) => {\r\n  const sender = req.body.sender || \"ไม่ทราบชื่อ\";\r\n  const filename = req.file.filename;\r\n\r\n  // อ่าน meta เดิม\r\n  let meta = {};\r\n  try {\r\n    meta = JSON.parse(await fs.readFile(\"uploads-meta.json\", \"utf-8\"));\r\n  } catch (e) {}\r\n\r\n  // เพิ่ม meta ใหม่\r\n  meta[filename] = { sender };\r\n\r\n  // เขียนกลับ\r\n  await fs.writeFile(\"uploads-meta.json\", JSON.stringify(meta, null, 2));\r\n\r\n  res.json({ success: true });\r\n});\r\n\r\n// API สำหรับดึง meta\r\napp.get(\"/api/uploads-meta\", async (req, res) => {\r\n  try {\r\n    const meta = JSON.parse(await fs.readFile(\"uploads-meta.json\", \"utf-8\"));\r\n    res.json(meta);\r\n  } catch (e) {\r\n    res.json({});\r\n  }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}